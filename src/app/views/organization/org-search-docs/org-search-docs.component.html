<mat-sidenav-container id="container">

  <!-- SIDENAV -->
  <mat-sidenav #sidenav align="start" [opened]="sideOpen" [mode]="sideMode" class="wrap mat-elevation-z12">
    <sk-org-tree-view [allowEdit]="'true'" (selectedDoc)="treeDocClicked($event)"></sk-org-tree-view>
  </mat-sidenav>

  <mat-sidenav-content [ngClass]="{'mat-content-rtl': rtl && sideOpen, 'mat-content-ltr': !rtl && sideOpen}">
    <!-- add doc button -->
    <button *ngIf="currentOrgUser?.roles.editor" mat-fab class="mat-accent-bg"
            matTooltip="{{'New Document' | translate}}" matTooltipPosition="after"
    [ngClass]="{'add-doc-button': !rtl, 'add-doc-button-rtl': rtl}" (click)="newDoc()">
      <mat-icon>playlist_add</mat-icon>
    </button>
    <!-- Tabs Wrapper -->

    <!-- Tabs -->
    <mat-tab-group>

      <!-- Messages Tab -->
      <mat-tab label="{{'Messages' | translate}}">
        <!-- HEADER -->
        <div class="header">
          <div class="hero-text" fxLayout="row" fxLayoutAlign="start center">
            <button mat-button class="menu-btn" fxHide.gt-sm (click)="sidenav.toggle()"
                  matTooltip="{{'Navigation Tree' | translate}}" matTooltipPosition="after">
              <mat-icon>menu</mat-icon>
            </button>
            <h3 [innerHTML]="'Messages' | translate"></h3>

            <span class="fillsapce"></span>

          </div>

        </div>
        <sk-org-messages></sk-org-messages>
      </mat-tab>

      <!-- Serach docs Tab -->
      <mat-tab label="{{'Search' | translate}}">
        <!-- HEADER -->
        <div class="header">
          <div class="hero-text" fxLayout="row" fxLayoutAlign="start center">
            <button mat-button class="menu-btn" fxHide.gt-sm (click)="sidenav.toggle()"
                    matTooltip="{{'Navigation Tree' | translate}}" matTooltipPosition="after">
            <mat-icon>menu</mat-icon>
            </button>
            <h3 [innerHTML]="'Documents' | translate"></h3>

            <span class="fillsapce"></span>

            <!--<button *ngIf="currentOrgUser?.roles.editor" mat-button class="rightside-buttons mat-icon-button"-->
            <!--(click)="newDoc()">-->
            <!--<mat-icon>add_circle_outline</mat-icon>-->
            <!--</button>-->

          </div>

        </div>
        <!--CONTENT -->
        <div class="content p-24">

          <div fxLayout="column" fxLayoutAlign="end center">

            <div class="filters" fxLayout="column" fxLayoutAlign="center center"
                 fxLayout.gt-xs="row" fxLayoutAlign.gt-xs="space-between center">
              <div>
                <mat-form-field class="docs-search">
                  <input #search matInput placeholder="{{'Search for a document' | translate }}"
                         [(ngModel)]="searchTerm">
                </mat-form-field>
                <mat-checkbox [(ngModel)]="docNameOnly" (change)="checkboxClick$.next()">{{'Doc name only' | translate
                  }}
                </mat-checkbox>
              </div>

              <div *ngIf="currentOrgUser?.roles.editor" fxLayout="row" fxLayoutAlign="space-between center">
                <mat-checkbox class="margin-fix" [(ngModel)]="published" (change)="checkboxClick$.next()">{{'Publish' |
                  translate }}
                </mat-checkbox>
                <mat-checkbox class="margin-fix" [(ngModel)]="edited" (change)="checkboxClick$.next()">{{'Edit' |
                  translate }}
                </mat-checkbox>
                <mat-checkbox class="margin-fix" [(ngModel)]="version" (change)="checkboxClick$.next()">{{'Previous Versions' | translate }}
                </mat-checkbox>
              </div>

            </div>

            <!-- Documents -->
            <div class="documents" fxLayout="row" fxLayoutAlign="center" fxLayoutWrap>

              <div class="document" *ngFor="let doc of documents" fxFlex="100" fxFlex.gt-xs="50"
                   fxFlex.gt-sm="33">

                <div class="document-content" fxLayout="column">

                  <div class="header" fxLayout="row" fxLayoutAlign="center center"
                       [ngClass]="doc.docType + '-bg'">
                  </div>

                  <div class="content" fxLayout="column" fxLayoutAlign="center center" fxFlex>
                    <div class="h1">{{doc.name}}</div>
                    <div class="updated">Version {{doc.version}}</div>
                  </div>

                  <div class="footer" fxLayout="row" fxLayoutAlign="space-evenly center">

                    <button *ngIf="currentOrgUser.roles.editor" mat-button class="mat-icon-button" color="primary"
                            (click)="editDoc(doc.docId, doc.docType, doc.version)">
                      <mat-icon>edit</mat-icon>
                    </button>

                    <button fxFlexAlign="center" mat-button class="mat-icon-button" color="primary"
                            (click)="openDoc(doc.docId, doc.docType, doc.version)">
                      <mat-icon>pageview</mat-icon>
                    </button>

                    <button *ngIf="currentOrgUser.roles.editor && doc.docType === 'v'" mat-button
                            class="mat-icon-button" color="accent"
                            (click)="deleteDocVersion(doc.docId, doc.docType, doc.version)">
                      <mat-icon>delete</mat-icon>
                    </button>

                  </div>

                </div>

              </div>

              <div class="no-documents" *ngIf="documents?.length === 0 && searchTerm !== ''">
                No document found!
              </div>
              <div class="no-documents" *ngIf="documents?.length === 0 && searchTerm === ''">
                Insert search term
              </div>

            </div>

          </div>

        </div>
      </mat-tab>

    </mat-tab-group>


    <!--/ CONTENT -->
  </mat-sidenav-content>
</mat-sidenav-container>


